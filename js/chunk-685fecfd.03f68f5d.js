(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-685fecfd"],{"4e19":function(t,e,i){},"584a":function(t,e){var i=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},6638:function(t,e,i){"use strict";var a=i("4e19"),r=i.n(a);r.a},"97fc":function(t,e,i){"use strict";var a=i("aebb"),r=i.n(a);r.a},a21f:function(t,e,i){var a=i("584a"),r=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},aebb:function(t,e,i){},d784:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"m-header is-fixed"},[i("div",{staticClass:"m-header-button is-left"},[t._t("left")],2),i("h1",{staticClass:"m-header-title",domProps:{textContent:t._s(t.title)}}),i("div",{staticClass:"m-header-button is-right"},[t._t("right")],2)])},r=[],o={props:{title:{type:String,default:""}}},s=o,n=(i("97fc"),i("2877")),l=Object(n["a"])(s,a,r,!1,null,"48061a4a",null);e["a"]=l.exports},e97b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("m-header",{attrs:{title:t.alter_name+t.info_name}},[i("a",{attrs:{slot:"left",href:"javascript:;"},on:{click:t.goPrev},slot:"left"},[i("i",{staticClass:"el-icon-arrow-left"})])]),i("span",{staticClass:"tip",style:{color:t.alter_tip.tip_color}},[t._v(t._s(t.alter_tip.tip_text))]),i("ul",[i("li",[i("p",[t._v(t._s(t.info_name))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.alter_text,expression:"alter_text"}],attrs:{type:"text",maxlength:"昵称"==t.info_name?16:100,placeholder:"请输入"+t.info_name},domProps:{value:t.alter_text},on:{input:function(e){e.target.composing||(t.alter_text=e.target.value)}}})]),i("li",[i("p",[t._v("验证码")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.alter_code,expression:"alter_code"}],attrs:{type:"text",id:"input_code",placeholder:"请输入验证码"},domProps:{value:t.alter_code},on:{input:function(e){e.target.composing||(t.alter_code=e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.verify_code,expression:"verify_code"}],attrs:{type:"button"},domProps:{value:t.verify_code},on:{click:function(e){return t.createCode()},input:function(e){e.target.composing||(t.verify_code=e.target.value)}}})])]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subInfo()}}},[t._v("提交")])],1)},r=[],o=i("f499"),s=i.n(o),n=i("2b0e"),l=i("d784"),u={components:{mHeader:l["a"]},data:function(){return{alter_name:"",info_name:"",alter_text:"",alter_code:"",verify_code:"",alter_tip:{tip_text:"",tip_color:"#989eac"},user_info:JSON.parse(localStorage.getItem("yice_user"))||null}},methods:{goPrev:function(){window.history.length>1?this.$router.back():this.$router.push("/")},info_init:function(){this.$route.query&&1==this.$route.query.alter_id?(this.info_name="昵称",this.alter_name="修改"):(this.info_name="标识码",this.alter_name="绑定"),n["default"].set(this.alter_tip,"tip_text","请输入"+this.info_name+"，并填写验证码")},createCode:function(){for(var t="",e=4,i=new Array(0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),a=0;a<e;a++){var r=Math.floor(36*Math.random());t+=i[r]}this.verify_code=t},subInfo:function(){var t=/^[a-zA-Z0-9]{6}$/;if(""==this.alter_text||""==this.alter_code)n["default"].set(this.alter_tip,"tip_text","请输入"+this.info_name+"，并填写验证码"),n["default"].set(this.alter_tip,"tip_color","#ff0000");else if("标识码"!=this.info_name||t.test(this.alter_text))if(this.alter_code.toLowerCase()!=this.verify_code.toLowerCase())n["default"].set(this.alter_tip,"tip_text","请输入正确的验证码！"),n["default"].set(this.alter_tip,"tip_color","#ff0000");else if("昵称"==this.info_name&&this.user_info.user_name==this.alter_text)n["default"].set(this.alter_tip,"tip_text","不能设置相同的昵称"),n["default"].set(this.alter_tip,"tip_color","#ff0000");else if("标识码"==this.info_name&&this.user_info.wifi_id==this.alter_text.toUpperCase())n["default"].set(this.alter_tip,"tip_text","不能设置相同的标识码"),n["default"].set(this.alter_tip,"tip_color","#ff0000");else{var e;n["default"].set(this.alter_tip,"tip_text",""),n["default"].set(this.alter_tip,"tip_color","#989eac"),e="昵称"==this.info_name?{user_name:this.alter_text,user_id:this.user_info.user_id}:{wifi_id:this.alter_text.toUpperCase(),user_id:this.user_info.user_id,user_coin:this.user_info.user_coin};var i=this;n["default"].axios({url:"http://114.215.242.13:8010/api/yicemall/alterUserinfo",method:"post",data:e,transformRequest:function(t){var e=[];for(var i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}}).then(function(t){if(200==t.status)if(n["default"].set(i.alter_tip,"tip_text",""),n["default"].set(i.alter_tip,"tip_color","#989eac"),t.data.code){e.user_name?n["default"].set(i.user_info,"user_name",i.alter_text):n["default"].set(i.user_info,"wifi_id",i.alter_text.toUpperCase()),i.user_info.user_coin=t.data.result.user_coin;var a=(new Date).getTime();n["default"].set(i.user_info,"r_time",a),localStorage.setItem("yice_user",s()(i.user_info)),i.$weui.toast("修改成功",{duration:500,callback:function(){i.alter_code="",i.createCode(),window.history.length>1?i.$router.back():i.$router.push("/")}})}else"No identification code was found"==t.data.error?(n["default"].set(i.alter_tip,"tip_text","标识码错误，请输入正确的标识码"),n["default"].set(i.alter_tip,"tip_color","#ff0000")):(n["default"].set(i.alter_tip,"tip_text",""),n["default"].set(i.alter_tip,"tip_color","#989eac"),i.$weui.topTips("服务器错误，请稍后重试",2e3))}).catch(function(t){i.alter_code="",i.createCode(),alert(t)})}else n["default"].set(this.alter_tip,"tip_text","请输入合法标识码！"),n["default"].set(this.alter_tip,"tip_color","#ff0000")}},mounted:function(){this.user_info?(this.createCode(),this.info_init()):this.$router.push("/login")}},_=u,f=(i("6638"),i("2877")),c=Object(f["a"])(_,a,r,!1,null,"a8738d5c",null);e["default"]=c.exports},f499:function(t,e,i){t.exports=i("a21f")}}]);